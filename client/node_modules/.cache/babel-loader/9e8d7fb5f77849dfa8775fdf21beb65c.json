{"ast":null,"code":"var _s = $RefreshSig$();\n\n/* eslint-disable no-plusplus */\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport { fetchVehicleIds } from '../../state/actions/mapActions';\nimport { store } from '../../state/store';\nconst defualtPolygonCoordinates = [{\n  lat: 51.522121898364986,\n  lng: -0.1593582845911126\n}, {\n  lat: 51.489486554202024,\n  lng: -0.16009828252122368\n}, {\n  lat: 51.48945352696307,\n  lng: -0.09697481847935624\n}, {\n  lat: 51.52190825390342,\n  lng: -0.09600745825457122\n}];\n\nconst handlePolygonMouseUp = polygon => {\n  const vertices = polygon.getPath();\n  const coordinates = [];\n\n  for (let i = 0; i < vertices.getLength(); i++) {\n    const xy = vertices.getAt(i);\n    coordinates.push([xy.lat(), xy.lng()]);\n  }\n\n  store.dispatch(fetchVehicleIds(coordinates));\n};\n\nconst usePolygonApi = () => {\n  _s();\n\n  const selectingArea = useSelector(state => state.map.selectingArea);\n\n  const handleApiLoaded = (map, maps, coordinates) => {\n    const polygon = new maps.Polygon({\n      paths: coordinates,\n      strokeColor: '#FF0000',\n      strokeOpacity: 0.8,\n      strokeWeight: 2,\n      fillColor: '#FF0000',\n      fillOpacity: 0.35,\n      editable: true,\n      draggable: true,\n      geodesic: true,\n      setVisible: false\n    });\n    polygon.setMap(map);\n    polygon.addListener('mouseup', () => handlePolygonMouseUp(polygon));\n  };\n\n  return [handleApiLoaded, defualtPolygonCoordinates];\n};\n\n_s(usePolygonApi, \"o4Jp/fPjl5OWoInRH7Sc61WiUTc=\", false, function () {\n  return [useSelector];\n});\n\nexport default usePolygonApi; // lat: 51.509865,\n// lng: -0.118092,","map":{"version":3,"sources":["C:/Users/Adrian/Desktop/Programming/Projects/Live-Vehicle-Map/client/src/features/Map/usePolygonApi.js"],"names":["React","useSelector","fetchVehicleIds","store","defualtPolygonCoordinates","lat","lng","handlePolygonMouseUp","polygon","vertices","getPath","coordinates","i","getLength","xy","getAt","push","dispatch","usePolygonApi","selectingArea","state","map","handleApiLoaded","maps","Polygon","paths","strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","editable","draggable","geodesic","setVisible","setMap","addListener"],"mappings":";;AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,SAASC,KAAT,QAAsB,mBAAtB;AAEA,MAAMC,yBAAyB,GAAG,CAChC;AACEC,EAAAA,GAAG,EAAE,kBADP;AAEEC,EAAAA,GAAG,EAAE,CAAC;AAFR,CADgC,EAKhC;AACED,EAAAA,GAAG,EAAE,kBADP;AAEEC,EAAAA,GAAG,EAAE,CAAC;AAFR,CALgC,EAShC;AACED,EAAAA,GAAG,EAAE,iBADP;AAEEC,EAAAA,GAAG,EAAE,CAAC;AAFR,CATgC,EAahC;AACED,EAAAA,GAAG,EAAE,iBADP;AAEEC,EAAAA,GAAG,EAAE,CAAC;AAFR,CAbgC,CAAlC;;AAmBA,MAAMC,oBAAoB,GAAIC,OAAD,IAAa;AACxC,QAAMC,QAAQ,GAAGD,OAAO,CAACE,OAAR,EAAjB;AACA,QAAMC,WAAW,GAAG,EAApB;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,QAAQ,CAACI,SAAT,EAApB,EAA0CD,CAAC,EAA3C,EAA+C;AAC7C,UAAME,EAAE,GAAGL,QAAQ,CAACM,KAAT,CAAeH,CAAf,CAAX;AACAD,IAAAA,WAAW,CAACK,IAAZ,CAAiB,CAACF,EAAE,CAACT,GAAH,EAAD,EAAWS,EAAE,CAACR,GAAH,EAAX,CAAjB;AACD;;AACDH,EAAAA,KAAK,CAACc,QAAN,CAAef,eAAe,CAACS,WAAD,CAA9B;AACD,CARD;;AAUA,MAAMO,aAAa,GAAG,MAAM;AAAA;;AAC1B,QAAMC,aAAa,GAAGlB,WAAW,CAAEmB,KAAD,IAAWA,KAAK,CAACC,GAAN,CAAUF,aAAtB,CAAjC;;AAEA,QAAMG,eAAe,GAAG,CAACD,GAAD,EAAME,IAAN,EAAYZ,WAAZ,KAA4B;AAClD,UAAMH,OAAO,GAAG,IAAIe,IAAI,CAACC,OAAT,CAAiB;AAC/BC,MAAAA,KAAK,EAAEd,WADwB;AAE/Be,MAAAA,WAAW,EAAE,SAFkB;AAG/BC,MAAAA,aAAa,EAAE,GAHgB;AAI/BC,MAAAA,YAAY,EAAE,CAJiB;AAK/BC,MAAAA,SAAS,EAAE,SALoB;AAM/BC,MAAAA,WAAW,EAAE,IANkB;AAO/BC,MAAAA,QAAQ,EAAE,IAPqB;AAQ/BC,MAAAA,SAAS,EAAE,IARoB;AAS/BC,MAAAA,QAAQ,EAAE,IATqB;AAU/BC,MAAAA,UAAU,EAAE;AAVmB,KAAjB,CAAhB;AAaA1B,IAAAA,OAAO,CAAC2B,MAAR,CAAed,GAAf;AACAb,IAAAA,OAAO,CAAC4B,WAAR,CAAoB,SAApB,EAA+B,MAAM7B,oBAAoB,CAACC,OAAD,CAAzD;AACD,GAhBD;;AAkBA,SAAO,CAACc,eAAD,EAAkBlB,yBAAlB,CAAP;AACD,CAtBD;;GAAMc,a;UACkBjB,W;;;AAuBxB,eAAeiB,aAAf,C,CAEA;AACA","sourcesContent":["/* eslint-disable no-plusplus */\r\nimport React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { fetchVehicleIds } from '../../state/actions/mapActions';\r\nimport { store } from '../../state/store';\r\n\r\nconst defualtPolygonCoordinates = [\r\n  {   \r\n    lat: 51.522121898364986,\r\n    lng: -0.1593582845911126,\r\n  },\r\n  {  \r\n    lat: 51.489486554202024,\r\n    lng: -0.16009828252122368,\r\n  },\r\n  { \r\n    lat: 51.48945352696307,\r\n    lng: -0.09697481847935624,\r\n  },\r\n  {   \r\n    lat: 51.52190825390342,\r\n    lng: -0.09600745825457122,\r\n  },\r\n];\r\n\r\nconst handlePolygonMouseUp = (polygon) => {\r\n  const vertices = polygon.getPath();\r\n  const coordinates = [];\r\n  for (let i = 0; i < vertices.getLength(); i++) {\r\n    const xy = vertices.getAt(i);\r\n    coordinates.push([xy.lat(), xy.lng()]);\r\n  }\r\n  store.dispatch(fetchVehicleIds(coordinates));\r\n};\r\n\r\nconst usePolygonApi = () => {\r\n  const selectingArea = useSelector((state) => state.map.selectingArea);\r\n \r\n  const handleApiLoaded = (map, maps, coordinates) => {\r\n    const polygon = new maps.Polygon({\r\n      paths: coordinates,\r\n      strokeColor: '#FF0000',\r\n      strokeOpacity: 0.8,\r\n      strokeWeight: 2,\r\n      fillColor: '#FF0000',\r\n      fillOpacity: 0.35,\r\n      editable: true,\r\n      draggable: true,\r\n      geodesic: true,\r\n      setVisible: false,\r\n    });\r\n    \r\n    polygon.setMap(map);\r\n    polygon.addListener('mouseup', () => handlePolygonMouseUp(polygon));\r\n  };\r\n\r\n  return [handleApiLoaded, defualtPolygonCoordinates];\r\n};\r\n\r\nexport default usePolygonApi;\r\n\r\n// lat: 51.509865,\r\n// lng: -0.118092,\r\n"]},"metadata":{},"sourceType":"module"}